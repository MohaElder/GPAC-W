{"version":3,"sources":["index.js"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.js","sourcesContent":["'use strict';\r\n\r\nvar traverse = module.exports = function (schema, opts, cb) {\r\n  // Legacy support for v0.3.1 and earlier.\r\n  if (typeof opts == 'function') {\r\n    cb = opts;\r\n    opts = {};\r\n  }\r\n\r\n  cb = opts.cb || cb;\r\n  var pre = (typeof cb == 'function') ? cb : cb.pre || function() {};\r\n  var post = cb.post || function() {};\r\n\r\n  _traverse(opts, pre, post, schema, '', schema);\r\n};\r\n\r\n\r\ntraverse.keywords = {\r\n  additionalItems: true,\r\n  items: true,\r\n  contains: true,\r\n  additionalProperties: true,\r\n  propertyNames: true,\r\n  not: true\r\n};\r\n\r\ntraverse.arrayKeywords = {\r\n  items: true,\r\n  allOf: true,\r\n  anyOf: true,\r\n  oneOf: true\r\n};\r\n\r\ntraverse.propsKeywords = {\r\n  definitions: true,\r\n  properties: true,\r\n  patternProperties: true,\r\n  dependencies: true\r\n};\r\n\r\ntraverse.skipKeywords = {\r\n  default: true,\r\n  enum: true,\r\n  const: true,\r\n  required: true,\r\n  maximum: true,\r\n  minimum: true,\r\n  exclusiveMaximum: true,\r\n  exclusiveMinimum: true,\r\n  multipleOf: true,\r\n  maxLength: true,\r\n  minLength: true,\r\n  pattern: true,\r\n  format: true,\r\n  maxItems: true,\r\n  minItems: true,\r\n  uniqueItems: true,\r\n  maxProperties: true,\r\n  minProperties: true\r\n};\r\n\r\n\r\nfunction _traverse(opts, pre, post, schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex) {\r\n  if (schema && typeof schema == 'object' && !Array.isArray(schema)) {\r\n    pre(schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex);\r\n    for (var key in schema) {\r\n      var sch = schema[key];\r\n      if (Array.isArray(sch)) {\r\n        if (key in traverse.arrayKeywords) {\r\n          for (var i=0; i<sch.length; i++)\r\n            _traverse(opts, pre, post, sch[i], jsonPtr + '/' + key + '/' + i, rootSchema, jsonPtr, key, schema, i);\r\n        }\r\n      } else if (key in traverse.propsKeywords) {\r\n        if (sch && typeof sch == 'object') {\r\n          for (var prop in sch)\r\n            _traverse(opts, pre, post, sch[prop], jsonPtr + '/' + key + '/' + escapeJsonPtr(prop), rootSchema, jsonPtr, key, schema, prop);\r\n        }\r\n      } else if (key in traverse.keywords || (opts.allKeys && !(key in traverse.skipKeywords))) {\r\n        _traverse(opts, pre, post, sch, jsonPtr + '/' + key, rootSchema, jsonPtr, key, schema);\r\n      }\r\n    }\r\n    post(schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex);\r\n  }\r\n}\r\n\r\n\r\nfunction escapeJsonPtr(str) {\r\n  return str.replace(/~/g, '~0').replace(/\\//g, '~1');\r\n}\r\n"]}